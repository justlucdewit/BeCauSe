// BCS E011
// Coded by luke_
// 11-11-2021

import "std/io"

memory memcpy_size 8 end
memory memcpy_src 8 end
memory memcpy_dst 8 end

macro memcpy // size src dst
    // Store all of the arguments into a memory block
    memcpy_dst !64
    memcpy_src !64
    memcpy_size !64

    // Loop over the bytes in the source
    0 while dup memcpy_size @64 < do
        // Get the source char
        dup memcpy_src @64 + @8

        // Write the char into dst
        over memcpy_dst @64 + !8

        // Increment for next iteration
        1 +
    end
end

memory hello 256 end

"Hello world!\n" hello memcpy